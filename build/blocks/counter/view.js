(()=>{"use strict";const e=window.wp.data,t="bsm/store",a={},s="SET_STATE",n="SET_MULTIPLE",c="RESET_STATE",r="DELETE_KEY",i={setState:(e,t)=>({type:s,key:e,value:t}),setMultiple:e=>({type:n,payload:e}),deleteKey:e=>({type:r,key:e}),resetState:(e=a)=>({type:c,initialState:e})},o=(0,e.createReduxStore)(t,{reducer:(e=a,t)=>{switch(t.type){case s:return{...e,[t.key]:t.value};case n:return{...e,...t.payload};case r:const{[t.key]:i,...o}=e;return o;case c:return t.initialState||a;default:return e}},actions:i,selectors:{getState:(e,t)=>e[t],getAllState:e=>e,hasKey:(e,t)=>t in e,getMultiple:(e,t)=>t.reduce((t,a)=>(a in e&&(t[a]=e[a]),t),{})}});(0,e.register)(o);const d=()=>(0,e.dispatch)(t),l=()=>(0,e.select)(t);"undefined"!=typeof window&&window.bsmInitialState&&(0,e.dispatch)(t).setMultiple(window.bsmInitialState),document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll('[data-bsm-block="counter"]');if(!t.length)return;const a="bsm/counter";void 0===l().getState(a)&&d().setState(a,0);const s=()=>{const e=l().getState(a)||0;document.querySelectorAll('[data-bsm-bind="bsm/counter"]').forEach(t=>{t.textContent=e})};var n;n=s,(0,e.subscribe)(n),t.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.dataset.bsmAction;if(!t)return;const s=l().getState(a)||0;switch(t){case"increment":d().setState(a,s+1);break;case"decrement":d().setState(a,s-1);break;case"reset":d().setState(a,0)}})}),s()})})();