(()=>{"use strict";const e=window.wp.blocks,t=window.wp.blockEditor,s=window.wp.components,n=window.wp.data,r=window.wp.element,i="bsm/store",a={},o="SET_STATE",c="SET_MULTIPLE",l="RESET_STATE",d="DELETE_KEY",u={setState:(e,t)=>({type:o,key:e,value:t}),setMultiple:e=>({type:c,payload:e}),deleteKey:e=>({type:d,key:e}),resetState:(e=a)=>({type:l,initialState:e})},p=(0,n.createReduxStore)(i,{reducer:(e=a,t)=>{switch(t.type){case o:return{...e,[t.key]:t.value};case c:return{...e,...t.payload};case d:const{[t.key]:s,...n}=e;return n;case l:return t.initialState||a;default:return e}},actions:u,selectors:{getState:(e,t)=>e[t],getAllState:e=>e,hasKey:(e,t)=>t in e,getMultiple:(e,t)=>t.reduce((t,s)=>(s in e&&(t[s]=e[s]),t),{})}});(0,n.register)(p),"undefined"!=typeof window&&window.bsmInitialState&&(0,n.dispatch)(i).setMultiple(window.bsmInitialState);const w=window.ReactJSXRuntime;(0,e.registerBlockType)("bsm/counter",{edit:()=>{const e=(0,t.useBlockProps)(),[a,o]=function(e,t){const s=(0,n.useSelect)(s=>{const n=s(i).getState(e);return void 0!==n?n:t},[e,t]),{setState:a,deleteKey:o}=(0,n.useDispatch)(i),c=(0,r.useCallback)(t=>{a(e,"function"==typeof t?t(s):t)},[e,s,a]),l=(0,r.useMemo)(()=>({reset:()=>a(e,t),remove:()=>o(e),update:t=>{"object"!=typeof s||null===s||Array.isArray(s)?console.warn("useBlockState.update() only works with object values"):a(e,{...s,...t})},isInitial:s===t||JSON.stringify(s)===JSON.stringify(t)}),[e,s,t,a,o]);return[s,c,l]}("bsm/counter",0);return(0,w.jsx)("div",{...e,children:(0,w.jsx)(s.Card,{children:(0,w.jsx)(s.CardBody,{children:(0,w.jsxs)("div",{className:"bsm-counter",children:[(0,w.jsx)("h3",{className:"bsm-counter__title",children:"BSM Shared Counter"}),(0,w.jsx)("p",{className:"bsm-counter__description",children:"This counter shares state with all other counter blocks on the page."}),(0,w.jsx)("div",{className:"bsm-counter__display",children:(0,w.jsx)("span",{className:"bsm-counter__value",children:a})}),(0,w.jsxs)("div",{className:"bsm-counter__buttons",children:[(0,w.jsx)(s.Button,{variant:"secondary",onClick:()=>o(e=>e-1),children:"-"}),(0,w.jsx)(s.Button,{variant:"secondary",onClick:()=>o(0),children:"Reset"}),(0,w.jsx)(s.Button,{variant:"primary",onClick:()=>o(e=>e+1),children:"+"})]})]})})})})},save:()=>null})})();